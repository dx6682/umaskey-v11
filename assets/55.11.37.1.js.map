{"version":3,"sources":["webpack:///./src/client/app/common/views/widgets/queue.vue?ca0a","webpack:///./src/client/app/common/views/widgets/queue.vue?5c9c","webpack:///./src/client/app/common/views/widgets/queue.vue?7198","webpack:///./src/client/app/common/views/widgets/queue.vue?c21a","webpack:///./src/client/app/common/views/widgets/queue.vue?e193","webpack:///./src/client/app/common/views/widgets/queue.vue","webpack:///./src/client/app/common/views/widgets/queue.vue?a58f"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA,kCAAkC,mBAAO,CAAC,oHAA+D;AACzG;AACA;AACA,cAAc,QAAS,8BAA8B,aAAa,YAAY,+BAA+B,UAAU,YAAY,iCAAiC,cAAc,eAAe,kBAAkB,oCAAoC,kBAAkB,QAAQ,UAAU,WAAW,eAAe,kBAAkB;AACvU;AACA;;;;;;;;;;;;;ACNA;;AAEA;AACA,cAAc,mBAAO,CAAC,s0BAA+d;AACrf,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,sIAAyE;AAC3F,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;;;;;;;;ACVf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oCAAoC;AACtD;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS,oBAAoB,EAAE;AAC3D;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,SAAS;AACT;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,aAAa;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtEyC;AACmB;AACxB;AACrB,kGAAM;AACrB;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,YAAY,4BAAO;AACnB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gDAAgD,uCAAuC;AACvF,iBAAiB;AACjB;AACA,gDAAgD,0BAA0B;AAC1E,iBAAiB;AACjB;AACA,gDAAgD,2BAA2B;AAC3E,iBAAiB;AACjB;AACA,gDAAgD,2BAA2B;AAC3E,iBAAiB;AACjB;AACA;AACA,gDAAgD,yCAAyC;AACzF,iBAAiB;AACjB;AACA,gDAAgD,4BAA4B;AAC5E,iBAAiB;AACjB;AACA,gDAAgD,6BAA6B;AAC7E,iBAAiB;AACjB;AACA,gDAAgD,6BAA6B;AAC7E,iBAAiB;AACjB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,sBAAsB,WAAW,GAAG,WAAW,GAAG,WAAW,GAAG,WAAW;AAC3E;AACA;AACA;AACA;AACA,2BAA2B,yBAAU;AACrC,4BAA4B,yBAAU;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,EAAC;;;ACnHoQ,CAAgB,uGAAG,EAAC,C;;;;;;;;ACA3L;AACvC;AACL;AACwC;;;AAG5F;AACsG;AACtG,gBAAgB,sCAAU;AAC1B,EAAE,qCAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,4F;;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAyiB,CAAgB,wfAAG,EAAC,C","file":"55.11.37.1.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".mntrproz[data-v-63d91a15]{display:flex;padding:4px}.mntrproz>div[data-v-63d91a15]{width:50%;padding:4px}.mntrproz>div>b[data-v-63d91a15]{display:block;font-size:12px;color:var(--text)}.mntrproz>div>span[data-v-63d91a15]{position:absolute;top:4px;right:4px;opacity:.7;font-size:12px;color:var(--text)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"61ad4d90\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"ui-container\",\n        {\n          attrs: { \"show-header\": !_vm.props.compact },\n          scopedSlots: _vm._u([\n            {\n              key: \"header\",\n              fn: function() {\n                return [\n                  _c(\"fa\", { attrs: { icon: _vm.faTasks } }),\n                  _vm._v(\"Queue\")\n                ]\n              },\n              proxy: true\n            }\n          ])\n        },\n        [\n          _c(\"div\", { staticClass: \"mntrproz\" }, [\n            _c(\"div\", [\n              _c(\"b\", [_vm._v(\"In\")]),\n              _vm.latestStats\n                ? _c(\"span\", [\n                    _vm._v(\n                      _vm._s(\n                        _vm._f(\"number\")(\n                          _vm.latestStats.inbox.activeSincePrevTick\n                        )\n                      ) +\n                        \" / \" +\n                        _vm._s(_vm._f(\"number\")(_vm.latestStats.inbox.delayed))\n                    )\n                  ])\n                : _vm._e(),\n              _c(\"div\", { ref: \"in\" })\n            ]),\n            _c(\"div\", [\n              _c(\"b\", [_vm._v(\"Out\")]),\n              _vm.latestStats\n                ? _c(\"span\", [\n                    _vm._v(\n                      _vm._s(\n                        _vm._f(\"number\")(\n                          _vm.latestStats.deliver.activeSincePrevTick\n                        )\n                      ) +\n                        \" / \" +\n                        _vm._s(\n                          _vm._f(\"number\")(_vm.latestStats.deliver.delayed)\n                        )\n                    )\n                  ])\n                : _vm._e(),\n              _c(\"div\", { ref: \"out\" })\n            ])\n          ])\n        ]\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import define from '../../define-widget';\nimport { faTasks } from '@fortawesome/free-solid-svg-icons';\nimport ApexCharts from 'apexcharts';\nexport default define({\n    name: 'queue',\n    props: () => ({\n        compact: false\n    })\n}).extend({\n    data() {\n        return {\n            stats: [],\n            inChart: null,\n            outChart: null,\n            faTasks\n        };\n    },\n    watch: {\n        stats(stats) {\n            this.inChart.updateSeries([{\n                    type: 'area',\n                    data: stats.map((x, i) => ({ x: i, y: x.inbox.activeSincePrevTick }))\n                }, {\n                    type: 'area',\n                    data: stats.map((x, i) => ({ x: i, y: x.inbox.active }))\n                }, {\n                    type: 'line',\n                    data: stats.map((x, i) => ({ x: i, y: x.inbox.waiting }))\n                }, {\n                    type: 'line',\n                    data: stats.map((x, i) => ({ x: i, y: x.inbox.delayed }))\n                }]);\n            this.outChart.updateSeries([{\n                    type: 'area',\n                    data: stats.map((x, i) => ({ x: i, y: x.deliver.activeSincePrevTick }))\n                }, {\n                    type: 'area',\n                    data: stats.map((x, i) => ({ x: i, y: x.deliver.active }))\n                }, {\n                    type: 'line',\n                    data: stats.map((x, i) => ({ x: i, y: x.deliver.waiting }))\n                }, {\n                    type: 'line',\n                    data: stats.map((x, i) => ({ x: i, y: x.deliver.delayed }))\n                }]);\n        }\n    },\n    computed: {\n        latestStats() {\n            return this.stats[this.stats.length - 1];\n        }\n    },\n    mounted() {\n        const chartOpts = {\n            chart: {\n                type: 'area',\n                height: 70,\n                animations: {\n                    dynamicAnimation: {\n                        enabled: false\n                    }\n                },\n                sparkline: {\n                    enabled: true,\n                }\n            },\n            dataLabels: {\n                enabled: false\n            },\n            tooltip: {\n                enabled: false\n            },\n            stroke: {\n                curve: 'straight',\n                width: 1\n            },\n            colors: ['#00E396', '#00BCD4', '#FFB300', '#e53935'],\n            series: [{ data: [] }, { data: [] }, { data: [] }, { data: [] }],\n            yaxis: {\n                min: 0,\n            }\n        };\n        this.inChart = new ApexCharts(this.$refs.in, chartOpts);\n        this.outChart = new ApexCharts(this.$refs.out, chartOpts);\n        this.inChart.render();\n        this.outChart.render();\n        const connection = this.$root.stream.useSharedConnection('queueStats');\n        connection.on('stats', this.onStats);\n        connection.on('statsLog', this.onStatsLog);\n        connection.send('requestLog', {\n            id: Math.random().toString().substr(2, 8),\n            length: 50\n        });\n        this.$once('hook:beforeDestroy', () => {\n            connection.dispose();\n            this.inChart.destroy();\n            this.outChart.destroy();\n        });\n    },\n    methods: {\n        func() {\n            this.props.compact = !this.props.compact;\n            this.save();\n        },\n        onStats(stats) {\n            this.stats.push(stats);\n            if (this.stats.length > 50)\n                this.stats.shift();\n        },\n        onStatsLog(statsLog) {\n            for (const stats of statsLog.reverse()) {\n                this.onStats(stats);\n            }\n        }\n    }\n});\n","import mod from \"-!../../../../../../node_modules/ts-loader/index.js??ref--5-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/ts-loader/index.js??ref--5-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./queue.vue?vue&type=template&id=63d91a15&scoped=true&\"\nimport script from \"./queue.vue?vue&type=script&lang=ts&\"\nexport * from \"./queue.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63d91a15\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/ubuntu/uma/misskey/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('63d91a15')) {\n      api.createRecord('63d91a15', component.options)\n    } else {\n      api.reload('63d91a15', component.options)\n    }\n    module.hot.accept(\"./queue.vue?vue&type=template&id=63d91a15&scoped=true&\", function () {\n      api.rerender('63d91a15', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/client/app/common/views/widgets/queue.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--1-oneOf-1-2!../../../../../../node_modules/stylus-loader/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./queue.vue?vue&type=style&index=0&id=63d91a15&lang=stylus&scoped=true&\""],"sourceRoot":""}